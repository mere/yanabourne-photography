---
import {type LocalImageProps } from "astro:assets";
import { Image } from "@unpic/react";

type Props = LocalImageProps & {
  class?: string;
  sizes?: string;
  src: string;
}

const { 
  src, 
  alt, 
  class: className = "", 
} = Astro.props;

const url = `${import.meta.env.PUBLIC_URL}/api/get-raw-image/?key=${src}`
// https://yanabourne-photography.netlify.app/.netlify/images?url=https%3A%2F%2Fyanabourne-photography.netlify.app%2Fapi%2Fget-raw-image%2F%3Fkey%3Dhome%2F1748978425856-xom7eucz00n-DSCF7793.jpg&w=300
---
{src && (
<Image
  src={url}
  alt={alt || ''}
  className={`util-image w-full h-full object-cover`}
  width={1200}
  height={1200}
  fallback="astro"
  loading="lazy"
/>
)}
