---
import {type LocalImageProps } from "astro:assets";
import { Image } from "@unpic/react";

type Props = LocalImageProps & {
  class?: string;
  sizes?: string;
  src: string;
}

const { 
  src, 
  alt, 
  class: className = "", 
} = Astro.props;

const url = `${import.meta.env.PUBLIC_URL}/api/get-raw-image/?key=${src}`

---
{src && (
<Image
  src={url}
  alt={alt || ''}
  className={`util-image w-full h-full object-cover`}
  width={1200}
  height={1200}
  fallback={import.meta.env.PUBLIC_LOCAL ? "astro" : "netlify"}
  loading="lazy"
/>
)}
