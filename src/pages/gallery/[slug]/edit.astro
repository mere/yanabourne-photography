---
import Layout from '../../../layouts/Layout.astro';
import GalleryEditor from '../../../react/GalleryEditor';
import Header from '../../../react/Header';
import { getStore } from '@netlify/blobs';

export const prerender = false;

const { slug } = Astro.params;

const store = getStore({
      name: "galleries",
      siteID: import.meta.env.NETLIFY_SITE_ID,
      token: import.meta.env.NETLIFY_BLOBS_TOKEN,
    });
    
const key = `gallery/${slug}`;
const gallery = await store.get(key, { type: 'json' });

---

<Layout title="Edit Gallery" id={slug}>
  <Header client:load />
  <GalleryEditor client:only="react" gallery={gallery} slug={slug} />
</Layout> 